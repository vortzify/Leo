import CJS_COMPAT_NODE_URL_01bjm6ikn7qq from 'node:url';
import CJS_COMPAT_NODE_PATH_01bjm6ikn7qq from 'node:path';
import CJS_COMPAT_NODE_MODULE_01bjm6ikn7qq from "node:module";

var __filename = CJS_COMPAT_NODE_URL_01bjm6ikn7qq.fileURLToPath(import.meta.url);
var __dirname = CJS_COMPAT_NODE_PATH_01bjm6ikn7qq.dirname(__filename);
var require = CJS_COMPAT_NODE_MODULE_01bjm6ikn7qq.createRequire(import.meta.url);

// ------------------------------------------------------------
// end of CJS compatibility banner, injected by Storybook's esbuild configuration
// ------------------------------------------------------------

// src/preset.ts
var core = {
  builder: import.meta.resolve("@storybook/builder-vite"),
  renderer: import.meta.resolve("@storybook/react/preset")
}, viteFinal = async (config, { presets }) => {
  let plugins = [...config?.plugins ?? []], { reactDocgen: reactDocgenOption, reactDocgenTypescriptOptions } = await presets.apply(
    "typescript",
    {}
  ), typescriptPresent;
  try {
    import.meta.resolve("typescript"), typescriptPresent = !0;
  } catch {
    typescriptPresent = !1;
  }
  if (reactDocgenOption === "react-docgen-typescript" && typescriptPresent && plugins.push(
    (await import("@joshwooding/vite-plugin-react-docgen-typescript")).default({
      ...reactDocgenTypescriptOptions,
      // We *need* this set so that RDT returns default values in the same format as react-docgen
      savePropValueAsString: !0
    })
  ), typeof reactDocgenOption == "string") {
    let { reactDocgen } = await import("./_node-chunks/react-docgen-AE5FPPQ2.js");
    plugins.unshift(
      // If react-docgen is specified, use it for everything, otherwise only use it for non-typescript files
      await reactDocgen({
        include: reactDocgenOption === "react-docgen" ? /\.(mjs|tsx?|jsx?)$/ : /\.(mjs|jsx?)$/
      })
    );
  }
  return { ...config, plugins };
};
export {
  core,
  viteFinal
};
